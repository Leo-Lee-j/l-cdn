import{_ as Q}from"./upgrade.ee3b1ad9.js";import{_ as W}from"./index.14b38748.js";import{d as M,o as i,h as H,i as e,ak as m,ap as k,r,c as _,w as a,an as Y,ao as J,ah as b,af as B,ae as t,ay as T,ag as g,p as K,u as X,aG as D,aq as V,ai as ee,aj as te}from"./vendor.5e65b579.js";import{U as N}from"./constants.b3ae2bd9.js";import{_ as F,u as ne,b as ae,s as se}from"./index.ef1bf2b6.js";import"./index.2825c935.js";import"./AsideMenu.984331a5.js";const oe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},le=e("path",{d:"M463.55 272.13H400v-48.2q0-4.32-.27-8.47c29.57-27.88 32.25-64.63 32.27-103c0-8.61-6.64-16-15.25-16.41A16 16 0 0 0 400 112c0 28-1.86 48.15-9.9 63.84c-19.22-41.15-65.78-63.91-134.1-63.91c-39.8 0-74.19 9.13-99.43 26.39c-14.9 10.19-26.2 22.91-33.7 37.72C114 160.65 112 141 112 112.46c0-8.61-6.6-16-15.2-16.44A16 16 0 0 0 80 112c0 37.63 2.61 73.73 32.44 101.63q-.43 5.06-.44 10.3v48.2H48.45c-8.61 0-16 6.62-16.43 15.23a16 16 0 0 0 16 16.77h64V320a143.32 143.32 0 0 0 10.39 53.69C96.74 396.64 80.18 422 80 463.34c0 8.74 6.62 16.3 15.36 16.65A16 16 0 0 0 112 464c0-27.66 9.1-44.71 26.17-61.32A144.37 144.37 0 0 0 220 459.42a16 16 0 0 0 20-15.49V192.45c0-8.61 6.62-16 15.23-16.43A16 16 0 0 1 272 192v251.93a16 16 0 0 0 20 15.49a144.4 144.4 0 0 0 81.82-56.74c17 16.54 26.09 33.52 26.17 60.95a16.27 16.27 0 0 0 15.1 16.37A16 16 0 0 0 432 464c0-41.68-16.6-67.23-42.39-90.31A143.32 143.32 0 0 0 400 320v-15.87h64a16 16 0 0 0 16-16.77c-.42-8.61-7.84-15.23-16.45-15.23z",fill:"currentColor"},null,-1),ie=e("path",{d:"M321.39 104l.32.09c13.57 3.8 25.07-10.55 18.2-22.85A95.86 95.86 0 0 0 256.21 32h-.42a95.87 95.87 0 0 0-84.19 50.13c-6.84 12.58 5.14 27 18.84 22.86c19.71-6 41.79-9.06 65.56-9.06c24.09 0 46.09 2.72 65.39 8.07z",fill:"currentColor"},null,-1);var re=M({name:"Bug",render:function(o,f){return i(),H("svg",oe,[le,ie])}});const ce={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},de=e("path",{d:"M256 32C167.67 32 96 96.51 96 176c0 128 160 304 160 304s160-176 160-304c0-79.49-71.67-144-160-144zm0 224a64 64 0 1 1 64-64a64.07 64.07 0 0 1-64 64z",fill:"currentColor"},null,-1);var ue=M({name:"LocationSharp",render:function(o,f){return i(),H("svg",ce,[de])}});const me={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},_e=e("path",{d:"M400 148l-21.12-24.57A191.43 191.43 0 0 0 240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 0 0 181.07-128",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),pe=e("path",{d:"M464 97.42V208a16 16 0 0 1-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z",fill:"currentColor"},null,-1);var P=M({name:"Reload",render:function(o,f){return i(),H("svg",me,[_e,pe])}});const ve=b("Suffix"),ge=b(" \u5662\uFF01 "),he=b(" Report reason "),fe=b(" Your contact email "),xe=b(" \u5C3E\u90E8 "),we=M({props:{messages:{default:()=>[]}},setup(s){const o=m(!1),f=k(()=>N),$=k(()=>f.value?document.body.clientHeight-80:document.body.clientHeight-223),L=(p,n)=>{const x=p.scrollTop,w=p.scrollHeight;p.offsetHeight+x-w==0&&n("handleScrollEvent")};return(p,n)=>{const x=r("a-back-top"),w=r("n-button"),h=r("n-thing"),c=r("n-list-item"),R=r("n-list"),E=r("a-textarea"),I=r("a-input"),U=r("n-card"),z=r("n-modal");return i(),_("div",{id:"container",ref:(d,y)=>{y.messageListContainer=d},class:"mo-flex-scroll-container mo-padding_2",style:T({height:g($)+"px"}),onScroll:n[1]||(n[1]=()=>L(p.$el,p.$emit))},[e(x,{target:()=>p.$refs.messageListContainer},null,8,["target"]),e(R,{bordered:""},{default:a(()=>[(i(!0),_(Y,null,J(s.messages,(d,y)=>(i(),_("div",{key:y,class:"message-item"},[e(c,null,{suffix:a(()=>[e(w,null,{default:a(()=>[ve]),_:1})]),default:a(()=>[e(h,{title:d.name,"title-extra":d.createdDate,description:"description"},{default:a(()=>[b(B(d.content),1)]),_:2},1032,["title","title-extra"])]),_:2},1024)]))),128))]),_:1}),t("div",{ref:(d,y)=>{y.reportModalContainer=d},class:"report-container mo-input-2"},[e(z,{show:o.value,"onUpdate:show":n[0]||(n[0]=d=>o.value=d)},{default:a(()=>[e(U,{style:{width:"520px"},title:"Report",bordered:!1,size:"huge"},{"header-extra":a(()=>[ge]),footer:a(()=>[xe]),default:a(()=>[t("p",null,[he,e(E,{"max-length":127})]),t("p",null,[fe,e(I)])]),_:1})]),_:1},8,["show"])],512)],36)}}});var ye=F(we,[["__scopeId","data-v-07cbfd98"]]);const Ce=K({id:"app-system",state:()=>({username:"",id:-1}),getters:{getUsername(){return this.username},getId(){return this.id}},actions:{setUsername(s){this.username=s},setUserId(s){this.id=s}}});const S=s=>(ee("data-v-32d78743"),s=s(),te(),s),be={id:"container"},ke={key:0,class:"mo-padding_2",style:{"margin-top":"21px"}},Se={id:"messageContent"},Me={class:"message-textarea-footer"},$e={class:"mo-tip-font"},Ee={key:0},Ie={key:1,class:"mo-padding_2"},Ue={key:0,class:"mo-content-container"},ze=S(()=>t("h3",{class:"mo-text-under"},"Contact Me",-1)),Ae={class:"mo-content-body flex-start"},Le={class:"contact-form mo-input-group"},Re=S(()=>t("span",null,"Send",-1)),He={style:{"margin-top":"0"}},je=S(()=>t("span",{style:{"margin-left":"10px"}},"GuangZhou",-1)),Be=S(()=>t("span",{style:{"margin-left":"10px"}},"MoLin",-1)),Te=S(()=>t("br",null,null,-1)),De={key:1,class:"mo-content-container flex-center"},Ve=S(()=>t("div",{style:{"max-width":"320px","text-align":"center"}},[t("img",{src:Q,alt:""}),b(" Upgrading ~ "),t("br")],-1)),Ne=[Ve],Fe={key:2,id:"message"},Pe=M({setup(s){const o=X(),f=ne(),$=Ce(),L=k(()=>f.getDevice),p=k(()=>f.getOpenContactMe);m(!1);const n=m(!1),x=m(!1),w=m(!1);m(!1);const h=m(""),c=m({emailContent:"",username:"",email:""}),R=m([]),E=m({page:1,limit:10}),I=k(()=>N),U=k(()=>({username:$.getUsername,id:$.getId})),z=(u=!1)=>{x.value=!0},d=()=>{if(h.value.length===0){o.warning("Where's your message ?");return}w.value=!0,U.value.username,U.value.id,h.value,new Date},y=()=>{x.value=!0,E.value.page=E.value.page+1,z()},Z=u=>{u.currentTarget.className="blink-1"},q=async()=>{const u=c.value;if(u.username.length===0){o.warning("Please input your nick name");return}if(u.email.length===0){o.warning("Please input your email");return}else if(!/^([a-zA-Z\d])(\w|-)+@[a-zA-Z\d]+\.[a-zA-Z]{2,4}$/.test(u.email)){o.warning("Invalid mailbox, check and try again");return}if(u.emailContent.length===0){o.warning("Please input your message");return}n.value=!0;const l=new FormData;l.append("str",u.emailContent),await ae(l).then(C=>{C.data?(o.warning("Sensitive terms detected. Please check and re-enter"),setTimeout(()=>{n.value=!1},500)):O()}).catch(()=>{setTimeout(()=>{n.value=!1},500)})},O=()=>{const u={fromUser:c.value.username,fromEmail:c.value.email,mailSubject:"Contact",mailContent:c.value.emailContent};se(u).then(()=>{o.success("Thanks for your contact"),setTimeout(()=>{n.value=!1},500)}).catch(()=>{setTimeout(()=>{n.value=!1},500)})};return z(),(u,l)=>{const C=r("n-input"),A=r("n-icon"),j=r("n-button"),G=r("n-spin");return i(),_("div",be,[e(W),g(I)?(i(),_("div",ke,[t("div",Se,[e(C,{value:h.value,"onUpdate:value":l[0]||(l[0]=v=>h.value=v),disabled:n.value,autosize:{minRows:3,maxRows:5},type:"textarea",class:"mo-input",placeholder:"Message*",maxlength:500},null,8,["value","disabled"]),t("div",Me,[t("span",$e,B(h.value.length>0?h.value.length:0)+" / 500 ",1),e(j,{type:"primary",onClick:d},D({default:a(()=>[w.value?V("",!0):(i(),_("span",Ee,"Send"))]),_:2},[w.value?{name:"icon",fn:a(()=>[e(A,null,{default:a(()=>[e(g(P),{class:"rotate-center"})]),_:1})])}:void 0]),1024)])])])):(i(),_("div",Ie,[g(p)===1?(i(),_("div",Ue,[ze,t("div",Ae,[t("div",Le,[e(C,{value:c.value.username,"onUpdate:value":l[1]||(l[1]=v=>c.value.username=v),disabled:n.value,type:"text",class:"mo-input",placeholder:"Name*",maxlength:20},null,8,["value","disabled"]),e(C,{value:c.value.email,"onUpdate:value":l[2]||(l[2]=v=>c.value.email=v),disabled:n.value,type:"text",class:"mo-input",placeholder:"Email*",maxlength:50},null,8,["value","disabled"]),e(C,{value:c.value.emailContent,"onUpdate:value":l[3]||(l[3]=v=>c.value.emailContent=v),disabled:n.value,autosize:{minRows:3,maxRows:5},type:"textarea",class:"mo-input",placeholder:"Message*",maxlength:500},null,8,["value","disabled"]),e(j,{type:"primary",disabled:n.value,onClick:q},D({default:a(()=>[Re]),_:2},[n.value?{name:"icon",fn:a(()=>[e(A,null,{default:a(()=>[e(g(P),{class:"rotate-center"})]),_:1})])}:void 0]),1032,["disabled"])]),t("div",{class:"contact-info",style:T({marginLeft:g(L)==="mobile"?"unset":"30px"})},[t("p",He,[e(A,{class:"mo-text-icon",size:25},{default:a(()=>[e(g(ue))]),_:1}),je]),t("p",{onMouseover:l[4]||(l[4]=v=>Z(v))},[e(A,{class:"mo-text-icon",size:25},{default:a(()=>[e(g(re))]),_:1}),Be],32),Te],4)])])):(i(),_("div",De,Ne))])),g(I)?(i(),_("div",Fe,[e(G,{show:x.value},{default:a(()=>[e(ye,{messages:R.value,onHandleScrollEvent:y},null,8,["messages"])]),_:1},8,["show"])])):V("",!0)])}}});var Je=F(Pe,[["__scopeId","data-v-32d78743"]]);export{Je as default};
